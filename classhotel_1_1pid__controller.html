<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>hotel::pid_controller class | libhotel : hotel's canonical library for PROS</title>
  <link rel="stylesheet" href="m-dark+documentation.compiled.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="shim.css" />
  <link rel="icon" href="logo-doxygen.jpeg" type="image/jpeg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <a href="index.html" id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m"><img src="logo-doxygen.jpeg" alt="" />libhotel <span class="m-thin">: hotel's canonical library for PROS</span></a>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path id="m-doc-search-icon-path" d="m6 0c-3.31 0-6 2.69-6 6 0 3.31 2.69 6 6 6 1.49 0 2.85-0.541 3.89-1.44-0.0164 0.338 0.147 0.759 0.5 1.15l3.22 3.79c0.552 0.614 1.45 0.665 2 0.115 0.55-0.55 0.499-1.45-0.115-2l-3.79-3.22c-0.392-0.353-0.812-0.515-1.15-0.5 0.895-1.05 1.44-2.41 1.44-3.89 0-3.31-2.69-6-6-6zm0 1.56a4.44 4.44 0 0 1 4.44 4.44 4.44 4.44 0 0 1-4.44 4.44 4.44 4.44 0 0 1-4.44-4.44 4.44 4.44 0 0 1 4.44-4.44z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li><a href="pages.html">Pages</a></li>
            <li><a href="namespaces.html">Namespaces</a></li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="3">
            <li><a href="pages.html">Pages</a></li>
            <li><a href="annotated.html">Classes</a></li>
            <li class="m-show-m"><a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <use href="#m-doc-search-icon-path" />
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          <div class="m-doc-include m-code m-inverted m-right-m m-text-right"><span class="cp">#include</span> <a class="cpf" href="pid_8hpp.html">&lt;include/hotel/pid.hpp&gt;</a></div>
          <div class="m-doc-template">template&lt;<a href="namespacehotel_1_1concepts.html#ab16fb67151d890b68025486310bb572f" class="m-doc">concepts::<wbr />Ratio</a> Kp_t, <a href="namespacehotel_1_1concepts.html#ab16fb67151d890b68025486310bb572f" class="m-doc">concepts::<wbr />Ratio</a> Ki_t, <a href="namespacehotel_1_1concepts.html#ab16fb67151d890b68025486310bb572f" class="m-doc">concepts::<wbr />Ratio</a> Kd_t, class _output_t, class FeedbackFn, class _target_t = typename std::result_of&lt;FeedbackFn&amp;()&gt;::type, class SettledFn = std::function&lt;bool(_target_t)&gt;&gt;</div>
          <span class="m-breadcrumb"><a href="namespacehotel.html">hotel</a>::<wbr/></span>pid_controller <span class="m-thin">class</span>
        </h1>
        <p>PID controller object.</p>
        <table class="m-table m-fullwidth m-flat">
          <thead>
            <tr><th colspan="2">Template parameters</th></tr>
          </thead>
          <tbody>
            <tr>
              <td style="width: 1%">Kp_t</td>
              <td><code>std::ratio</code> representing the proportional gain</td>
            </tr>
            <tr>
              <td>Ki_t</td>
              <td><code>std::ratio</code> representing the integral gain</td>
            </tr>
            <tr>
              <td>Kd_t</td>
              <td><code>std::ratio</code> representing the derivative gain</td>
            </tr>
            <tr>
              <td>_output_t</td>
              <td>generator output type (should match whatever is being controlled)</td>
            </tr>
            <tr>
              <td>FeedbackFn</td>
              <td>type representing a feedback function (should have the form <code>_target_t(*)()</code>, <code>std::function&lt;_target_t()&gt;</code>, or equivalent)</td>
            </tr>
            <tr>
              <td>_target_t</td>
              <td>setpoint type (deduced from <code>FeedbackFn</code> return type)</td>
            </tr>
            <tr>
              <td>SettledFn</td>
              <td>type representing a function that evaluates whether the controller has settled (should have the form <code>bool(*)(_target_t)</code>, <code>std::function&lt;bool(_target_t)&gt;</code>, or equivalent)</td>
            </tr>
          </tbody>
        </table>
        <div class="m-block m-default">
          <h3>Contents</h3>
          <ul>
            <li>
              Reference
              <ul>
                <li><a href="#pub-types">Public types</a></li>
                <li><a href="#typeless-methods">Constructors, destructors, conversion operators</a></li>
                <li><a href="#pub-methods">Public functions</a></li>
              </ul>
            </li>
          </ul>
        </div>
        <section id="pub-types">
          <h2><a href="#pub-types">Public types</a></h2>
          <dl class="m-doc">
            <dt id="a401b66789086924f940bd579663e3310">
              using <a href="#a401b66789086924f940bd579663e3310" class="m-doc-self">target_t</a> = _target_t
            </dt>
            <dd><span></span></dd>
            <dt id="a83595da9cffee4f22d49e873b7adf9db">
              using <a href="#a83595da9cffee4f22d49e873b7adf9db" class="m-doc-self">output_t</a> = _output_t
            </dt>
            <dd><span></span></dd>
          </dl>
        </section>
        <section id="typeless-methods">
          <h2><a href="#typeless-methods">Constructors, destructors, conversion operators</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper"><a href="#a5586e8a90d43b60aeaf508819dbd626d" class="m-doc">pid_controller</a>(</span><span class="m-doc-wrap">FeedbackFn ffn,
              SettledFn sfn,
              <a href="classhotel_1_1pid__controller.html#a401b66789086924f940bd579663e3310" class="m-doc">target_<wbr />t</a> setpoint = 0)</span>
            </dt>
            <dd>construct a PID controller object</dd>
          </dl>
        </section>
        <section id="pub-methods">
          <h2><a href="#pub-methods">Public functions</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a37da33a6def0754c878796c229087440" class="m-doc">run</a>(</span><span class="m-doc-wrap">) -&gt; <a href="classhotel_1_1coro_1_1generator.html" class="m-doc">coro::<wbr />generator</a>&lt;<a href="classhotel_1_1pid__controller.html#a83595da9cffee4f22d49e873b7adf9db" class="m-doc">output_<wbr />t</a>&gt;</span>
            </dt>
            <dd>create PID function as a generator coroutine</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a1bfb78041b414d27e6054632da67673c" class="m-doc">target</a>(</span><span class="m-doc-wrap"><a href="classhotel_1_1pid__controller.html#a401b66789086924f940bd579663e3310" class="m-doc">target_<wbr />t</a> setpoint) -&gt; <a href="classhotel_1_1pid__controller.html" class="m-doc">pid_<wbr />controller</a>&amp;</span>
            </dt>
            <dd>set a new target for this controller</dd>
          </dl>
        </section>
        <section>
          <h2>Function documentation</h2>
          <section class="m-doc-details" id="a5586e8a90d43b60aeaf508819dbd626d"><div>
            <h3>
              <div class="m-doc-template">
                template&lt;<a href="namespacehotel_1_1concepts.html#ab16fb67151d890b68025486310bb572f" class="m-doc">concepts::<wbr />Ratio</a> Kp_t, <a href="namespacehotel_1_1concepts.html#ab16fb67151d890b68025486310bb572f" class="m-doc">concepts::<wbr />Ratio</a> Ki_t, <a href="namespacehotel_1_1concepts.html#ab16fb67151d890b68025486310bb572f" class="m-doc">concepts::<wbr />Ratio</a> Kd_t, class _output_t, class FeedbackFn, class _target_t, class SettledFn&gt;
              </div>
              <span class="m-doc-wrap-bumper"> hotel::<wbr />pid_controller&lt;Kp_t, Ki_t, Kd_t, _output_t, FeedbackFn, _target_t, SettledFn&gt;::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a5586e8a90d43b60aeaf508819dbd626d" class="m-doc-self">pid_controller</a>(</span><span class="m-doc-wrap">FeedbackFn ffn,
              SettledFn sfn,
              <a href="classhotel_1_1pid__controller.html#a401b66789086924f940bd579663e3310" class="m-doc">target_<wbr />t</a> setpoint = 0)</span></span>
            </h3>
            <p>construct a PID controller object</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">ffn</td>
                  <td>a feedback function (of the form <code>output_t (*)()</code> or <code>std::function&lt;<a href="classhotel_1_1pid__controller.html#a83595da9cffee4f22d49e873b7adf9db" class="m-doc">output_<wbr />t()</a>&gt;</code></td>
                </tr>
                <tr>
                  <td>sfn</td>
                  <td>a predicate function that returns true when</td>
                </tr>
                <tr>
                  <td>setpoint</td>
                  <td>the initial setpoint for the controller</td>
                </tr>
              </tbody>
            </table>
<p>typically it will be more convenient to use one of the typedefs (see below) rather than specifying the full template for this type.</p><p>example:</p><pre class="m-code"><span class="n">pros</span><span class="o">::</span><span class="n">Motor</span><span class="w"> </span><span class="n">motor</span><span class="p">{</span><span class="mi">1</span><span class="p">};</span><span class="w"></span>

<span class="c1">// use motor_position_controller instead of</span>
<span class="c1">//  pid_controller&lt;std::ratio&lt;...&gt;, std::ratio&lt;...&gt;, std::ratio&lt;...&gt;, std::int32_t, std::function&lt;double()&gt;&gt;</span>
<span class="n">hotel</span><span class="o">::</span><span class="n">motor_position_controller</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">ratio</span><span class="o">&lt;</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">ratio</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">ratio</span><span class="o">&lt;</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">motor_controller</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="p">[</span><span class="o">&amp;</span><span class="n">motor</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">motor</span><span class="p">.</span><span class="n">get_position</span><span class="p">();</span><span class="w"> </span><span class="p">},</span><span class="w">           </span><span class="c1">// feedback function</span>
<span class="w">    </span><span class="p">[]</span><span class="w"> </span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">fabs</span><span class="p">(</span><span class="n">error</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="p">},</span><span class="w">       </span><span class="c1">// settled function</span>
<span class="w">    </span><span class="mf">200.0</span><span class="w">                                                </span><span class="c1">// initial setpoint (optional)</span>
<span class="p">};</span><span class="w"></span></pre>
          </div></section>
          <section class="m-doc-details" id="a37da33a6def0754c878796c229087440"><div>
            <h3>
              <div class="m-doc-template">
                template&lt;<a href="namespacehotel_1_1concepts.html#ab16fb67151d890b68025486310bb572f" class="m-doc">concepts::<wbr />Ratio</a> Kp_t, <a href="namespacehotel_1_1concepts.html#ab16fb67151d890b68025486310bb572f" class="m-doc">concepts::<wbr />Ratio</a> Ki_t, <a href="namespacehotel_1_1concepts.html#ab16fb67151d890b68025486310bb572f" class="m-doc">concepts::<wbr />Ratio</a> Kd_t, class _output_t, class FeedbackFn, class _target_t, class SettledFn&gt;
              </div>
              <span class="m-doc-wrap-bumper"><a href="classhotel_1_1coro_1_1generator.html" class="m-doc">coro::<wbr />generator</a>&lt;<a href="classhotel_1_1pid__controller.html#a83595da9cffee4f22d49e873b7adf9db" class="m-doc">output_<wbr />t</a>&gt; hotel::<wbr />pid_controller&lt;Kp_t, Ki_t, Kd_t, _output_t, FeedbackFn, _target_t, SettledFn&gt;::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a37da33a6def0754c878796c229087440" class="m-doc-self">run</a>(</span><span class="m-doc-wrap">)</span></span>
            </h3>
            <p>create PID function as a generator coroutine</p>
            <table class="m-table m-fullwidth m-flat">
              <tfoot>
                <tr>
                  <th style="width: 1%">Returns</th>
                  <td>the output according to <svg class="m-math" style="width: 20.308em; height: 1.674em; vertical-align: -0.434em;" viewBox="0 -11.922013 194.959967 16.073179">
<title>
$K_p * e(T) + K_i * \int_0^T e(T)dT + K_d * \frac{dE}{dT}$
</title>
<defs>
<path id='eq1-g1-3' d='M3.287671-5.104857C3.299626-5.272229 3.299626-5.559153 2.988792-5.559153C2.797509-5.559153 2.642092-5.403736 2.677958-5.248319V-5.092902L2.84533-3.239851L1.315068-4.351681C1.207472-4.411457 1.183562-4.435367 1.099875-4.435367C.932503-4.435367 .777086-4.267995 .777086-4.100623C.777086-3.90934 .896638-3.861519 1.016189-3.801743L2.713823-2.988792L1.06401-2.187796C.872727-2.092154 .777086-2.044334 .777086-1.865006S.932503-1.530262 1.099875-1.530262C1.183562-1.530262 1.207472-1.530262 1.506351-1.75741L2.84533-2.725778L2.666002-.71731C2.666002-.466252 2.881196-.406476 2.976837-.406476C3.120299-.406476 3.299626-.490162 3.299626-.71731L3.120299-2.725778L4.65056-1.613948C4.758157-1.554172 4.782067-1.530262 4.865753-1.530262C5.033126-1.530262 5.188543-1.697634 5.188543-1.865006C5.188543-2.044334 5.080946-2.10411 4.937484-2.175841C4.220174-2.534496 4.196264-2.534496 3.251806-2.976837L4.901619-3.777833C5.092902-3.873474 5.188543-3.921295 5.188543-4.100623S5.033126-4.435367 4.865753-4.435367C4.782067-4.435367 4.758157-4.435367 4.459278-4.208219L3.120299-3.239851L3.287671-5.104857Z'/>
<path id='eq1-g4-48' d='M3.897385-2.542466C3.897385-3.395268 3.809714-3.913325 3.5467-4.423412C3.196015-5.124782 2.550436-5.300125 2.11208-5.300125C1.107846-5.300125 .74122-4.550934 .629639-4.327771C.342715-3.745953 .326775-2.956912 .326775-2.542466C.326775-2.016438 .350685-1.211457 .73325-.573848C1.099875 .01594 1.689664 .167372 2.11208 .167372C2.494645 .167372 3.180075 .047821 3.57858-.74122C3.873474-1.315068 3.897385-2.024408 3.897385-2.542466ZM2.11208-.055791C1.841096-.055791 1.291158-.183313 1.123786-1.020174C1.036115-1.474471 1.036115-2.223661 1.036115-2.638107C1.036115-3.188045 1.036115-3.745953 1.123786-4.184309C1.291158-4.99726 1.912827-5.076961 2.11208-5.076961C2.383064-5.076961 2.933001-4.941469 3.092403-4.216189C3.188045-3.777833 3.188045-3.180075 3.188045-2.638107C3.188045-2.16787 3.188045-1.45056 3.092403-1.004234C2.925031-.167372 2.375093-.055791 2.11208-.055791Z'/>
<path id='eq1-g0-82' d='M3.251806 10.520548C3.096389 12.481196 2.666002 13.019178 1.984558 13.019178C1.829141 13.019178 1.470486 12.983313 1.219427 12.76812C1.566127 12.720299 1.661768 12.44533 1.661768 12.277958C1.661768 11.931258 1.398755 11.775841 1.171606 11.775841C.932503 11.775841 .669489 11.931258 .669489 12.289913C.669489 12.863761 1.267248 13.282192 1.984558 13.282192C3.120299 13.282192 3.694147 12.242092 3.957161 11.166127C4.112578 10.544458 4.542964 7.065504 4.638605 5.738481L4.865753 2.761644C5.033126 .561893 5.439601 .263014 5.977584 .263014C6.097136 .263014 6.467746 .286924 6.73076 .514072C6.38406 .561893 6.288418 .836862 6.288418 1.004234C6.288418 1.350934 6.551432 1.506351 6.77858 1.506351C7.017684 1.506351 7.280697 1.350934 7.280697 .992279C7.280697 .418431 6.682939 0 5.965629 0C4.829888 0 4.363636 1.159651 4.160399 2.068244C4.016936 2.725778 3.58655 6.097136 3.478954 7.543711L3.251806 10.520548Z'/>
<path id='eq1-g2-69' d='M5.969614-1.849066C5.985554-1.880946 6.001494-1.928767 6.001494-1.960648C6.001494-1.976588 5.993524-2.072229 5.881943-2.072229C5.794271-2.072229 5.786301-2.048319 5.7066-1.872976C5.196513-.70934 4.821918-.263014 3.52279-.263014H2.072229C2.000498-.278954 1.976588-.278954 1.976588-.334745C1.976588-.398506 1.992528-.462267 2.008468-.510087L2.558406-2.685928H3.411208C3.993026-2.685928 4.112578-2.590286 4.112578-2.335243C4.112578-2.327273 4.112578-2.199751 4.056787-1.976588C4.040847-1.936737 4.032877-1.888917 4.032877-1.865006C4.032877-1.857036 4.040847-1.753425 4.152428-1.753425C4.24807-1.753425 4.26401-1.801245 4.29589-1.936737L4.718306-3.602491C4.726276-3.626401 4.750187-3.745953 4.750187-3.761893C4.750187-3.841594 4.686426-3.881445 4.630635-3.881445C4.527024-3.881445 4.519054-3.825654 4.479203-3.690162C4.319801-3.068493 4.104608-2.948941 3.419178-2.948941H2.622167L3.100374-4.853798C3.172105-5.140722 3.180075-5.156663 3.506849-5.156663H4.750187C5.7066-5.156663 6.009465-4.96538 6.009465-4.26401C6.009465-4.096638 5.969614-3.897385 5.969614-3.745953C5.969614-3.650311 6.025405-3.610461 6.089166-3.610461C6.200747-3.610461 6.208717-3.682192 6.224658-3.817684L6.36812-5.172603C6.37609-5.212453 6.37609-5.268244 6.37609-5.308095C6.37609-5.419676 6.280448-5.419676 6.136986-5.419676H1.936737C1.785305-5.419676 1.689664-5.419676 1.689664-5.268244C1.689664-5.156663 1.793275-5.156663 1.928767-5.156663C1.952677-5.156663 2.096139-5.156663 2.231631-5.140722C2.399004-5.124782 2.414944-5.100872 2.414944-5.029141C2.414944-4.98929 2.399004-4.941469 2.391034-4.901619L1.323039-.629639C1.251308-.326775 1.235367-.263014 .645579-.263014C.494147-.263014 .398506-.263014 .398506-.111582C.398506 0 .502117 0 .637609 0H4.94944C5.148692 0 5.156663 0 5.220423-.143462L5.969614-1.849066Z'/>
<path id='eq1-g2-84' d='M3.602491-4.821918C3.674222-5.108842 3.682192-5.124782 4.008966-5.124782H4.614695C5.443587-5.124782 5.539228-4.861768 5.539228-4.463263C5.539228-4.26401 5.491407-3.921295 5.483437-3.881445C5.467497-3.793773 5.459527-3.722042 5.459527-3.706102C5.459527-3.602491 5.531258-3.57858 5.579078-3.57858C5.66675-3.57858 5.69863-3.626401 5.72254-3.777833L5.937733-5.276214C5.937733-5.387796 5.842092-5.387796 5.69863-5.387796H1.004234C.804981-5.387796 .789041-5.387796 .73325-5.220423L.247073-3.841594C.231133-3.801743 .207223-3.737983 .207223-3.690162C.207223-3.626401 .263014-3.57858 .326775-3.57858C.414446-3.57858 .430386-3.618431 .478207-3.753923C.932503-5.029141 1.163636-5.124782 2.375093-5.124782H2.685928C2.925031-5.124782 2.933001-5.116812 2.933001-5.053051C2.933001-5.029141 2.901121-4.869738 2.893151-4.837858L1.841096-.653549C1.769365-.350685 1.745455-.263014 .916563-.263014C.661519-.263014 .581818-.263014 .581818-.111582C.581818-.103611 .581818 0 .71731 0C.932503 0 1.482441-.02391 1.697634-.02391H2.375093C2.598257-.02391 3.156164 0 3.379328 0C3.443088 0 3.56264 0 3.56264-.151432C3.56264-.263014 3.474969-.263014 3.259776-.263014C3.068493-.263014 3.004732-.263014 2.797509-.278954C2.542466-.302864 2.510585-.334745 2.510585-.438356C2.510585-.470237 2.518555-.502117 2.542466-.581818L3.602491-4.821918Z'/>
<path id='eq1-g2-100' d='M4.28792-5.292154C4.29589-5.308095 4.319801-5.411706 4.319801-5.419676C4.319801-5.459527 4.28792-5.531258 4.192279-5.531258C4.160399-5.531258 3.913325-5.507347 3.730012-5.491407L3.283686-5.459527C3.108344-5.443587 3.028643-5.435616 3.028643-5.292154C3.028643-5.180573 3.140224-5.180573 3.235866-5.180573C3.618431-5.180573 3.618431-5.132752 3.618431-5.061021C3.618431-5.0132 3.55467-4.750187 3.514819-4.590785L3.124284-3.036613C3.052553-3.172105 2.82142-3.514819 2.335243-3.514819C1.3868-3.514819 .342715-2.406974 .342715-1.227397C.342715-.398506 .876712 .079701 1.490411 .079701C2.000498 .079701 2.438854-.326775 2.582316-.486177C2.725778 .063761 3.267746 .079701 3.363387 .079701C3.730012 .079701 3.913325-.223163 3.977086-.358655C4.136488-.645579 4.24807-1.107846 4.24807-1.139726C4.24807-1.187547 4.216189-1.243337 4.120548-1.243337S4.008966-1.195517 3.961146-.996264C3.849564-.557908 3.698132-.143462 3.387298-.143462C3.203985-.143462 3.132254-.294894 3.132254-.518057C3.132254-.669489 3.156164-.757161 3.180075-.860772L4.28792-5.292154ZM2.582316-.860772C2.183811-.310834 1.769365-.143462 1.514321-.143462C1.147696-.143462 .964384-.478207 .964384-.892653C.964384-1.267248 1.179577-2.12005 1.354919-2.470735C1.586052-2.956912 1.976588-3.291656 2.343213-3.291656C2.86127-3.291656 3.012702-2.709838 3.012702-2.614197C3.012702-2.582316 2.81345-1.801245 2.765629-1.594022C2.662017-1.219427 2.662017-1.203487 2.582316-.860772Z'/>
<path id='eq1-g2-105' d='M2.375093-4.97335C2.375093-5.148692 2.247572-5.276214 2.064259-5.276214C1.857036-5.276214 1.625903-5.084932 1.625903-4.845828C1.625903-4.670486 1.753425-4.542964 1.936737-4.542964C2.14396-4.542964 2.375093-4.734247 2.375093-4.97335ZM1.211457-2.048319L.781071-.948443C.74122-.828892 .70137-.73325 .70137-.597758C.70137-.207223 1.004234 .079701 1.42665 .079701C2.199751 .079701 2.526526-1.036115 2.526526-1.139726C2.526526-1.219427 2.462765-1.243337 2.406974-1.243337C2.311333-1.243337 2.295392-1.187547 2.271482-1.107846C2.088169-.470237 1.761395-.143462 1.44259-.143462C1.346949-.143462 1.251308-.183313 1.251308-.398506C1.251308-.589788 1.307098-.73325 1.41071-.980324C1.490411-1.195517 1.570112-1.41071 1.657783-1.625903L1.904857-2.271482C1.976588-2.454795 2.072229-2.701868 2.072229-2.83736C2.072229-3.235866 1.753425-3.514819 1.346949-3.514819C.573848-3.514819 .239103-2.399004 .239103-2.295392C.239103-2.223661 .294894-2.191781 .358655-2.191781C.462267-2.191781 .470237-2.239601 .494147-2.319303C.71731-3.076463 1.083935-3.291656 1.323039-3.291656C1.43462-3.291656 1.514321-3.251806 1.514321-3.028643C1.514321-2.948941 1.506351-2.83736 1.42665-2.598257L1.211457-2.048319Z'/>
<path id='eq1-g2-112' d='M.414446 .964384C.350685 1.219427 .334745 1.283188 .01594 1.283188C-.095641 1.283188-.191283 1.283188-.191283 1.43462C-.191283 1.506351-.119552 1.546202-.079701 1.546202C0 1.546202 .03188 1.522291 .621669 1.522291C1.195517 1.522291 1.362889 1.546202 1.41868 1.546202C1.45056 1.546202 1.570112 1.546202 1.570112 1.39477C1.570112 1.283188 1.458531 1.283188 1.362889 1.283188C.980324 1.283188 .980324 1.235367 .980324 1.163636C.980324 1.107846 1.123786 .541968 1.362889-.390535C1.466501-.207223 1.713574 .079701 2.14396 .079701C3.124284 .079701 4.144458-1.052055 4.144458-2.207721C4.144458-2.996762 3.634371-3.514819 2.996762-3.514819C2.518555-3.514819 2.13599-3.188045 1.904857-2.948941C1.737484-3.514819 1.203487-3.514819 1.123786-3.514819C.836862-3.514819 .637609-3.331507 .510087-3.084433C.326775-2.725778 .239103-2.319303 .239103-2.295392C.239103-2.223661 .294894-2.191781 .358655-2.191781C.462267-2.191781 .470237-2.223661 .526027-2.430884C.629639-2.83736 .773101-3.291656 1.099875-3.291656C1.299128-3.291656 1.354919-3.108344 1.354919-2.917061C1.354919-2.83736 1.323039-2.646077 1.307098-2.582316L.414446 .964384ZM1.880946-2.454795C1.920797-2.590286 1.920797-2.606227 2.040349-2.749689C2.343213-3.108344 2.685928-3.291656 2.972852-3.291656C3.371357-3.291656 3.52279-2.901121 3.52279-2.542466C3.52279-2.247572 3.347447-1.39477 3.108344-.924533C2.901121-.494147 2.518555-.143462 2.14396-.143462C1.601993-.143462 1.474471-.765131 1.474471-.820922C1.474471-.836862 1.490411-.924533 1.498381-.948443L1.880946-2.454795Z'/>
<path id='eq1-g5-40' d='M3.88543 2.905106C3.88543 2.86924 3.88543 2.84533 3.682192 2.642092C2.486675 1.43462 1.817186-.537983 1.817186-2.976837C1.817186-5.296139 2.379078-7.292653 3.765878-8.703362C3.88543-8.810959 3.88543-8.834869 3.88543-8.870735C3.88543-8.942466 3.825654-8.966376 3.777833-8.966376C3.622416-8.966376 2.642092-8.105604 2.056289-6.933998C1.446575-5.726526 1.171606-4.447323 1.171606-2.976837C1.171606-1.912827 1.338979-.490162 1.960648 .789041C2.666002 2.223661 3.646326 3.000747 3.777833 3.000747C3.825654 3.000747 3.88543 2.976837 3.88543 2.905106Z'/>
<path id='eq1-g5-41' d='M3.371357-2.976837C3.371357-3.88543 3.251806-5.36787 2.582316-6.75467C1.876961-8.18929 .896638-8.966376 .765131-8.966376C.71731-8.966376 .657534-8.942466 .657534-8.870735C.657534-8.834869 .657534-8.810959 .860772-8.607721C2.056289-7.400249 2.725778-5.427646 2.725778-2.988792C2.725778-.669489 2.163885 1.327024 .777086 2.737733C.657534 2.84533 .657534 2.86924 .657534 2.905106C.657534 2.976837 .71731 3.000747 .765131 3.000747C.920548 3.000747 1.900872 2.139975 2.486675 .968369C3.096389-.251059 3.371357-1.542217 3.371357-2.976837Z'/>
<path id='eq1-g5-43' d='M4.770112-2.761644H8.069738C8.237111-2.761644 8.452304-2.761644 8.452304-2.976837C8.452304-3.203985 8.249066-3.203985 8.069738-3.203985H4.770112V-6.503611C4.770112-6.670984 4.770112-6.886177 4.554919-6.886177C4.327771-6.886177 4.327771-6.682939 4.327771-6.503611V-3.203985H1.028144C.860772-3.203985 .645579-3.203985 .645579-2.988792C.645579-2.761644 .848817-2.761644 1.028144-2.761644H4.327771V.537983C4.327771 .705355 4.327771 .920548 4.542964 .920548C4.770112 .920548 4.770112 .71731 4.770112 .537983V-2.761644Z'/>
<path id='eq1-g3-75' d='M5.977584-4.829888C5.965629-4.865753 5.917808-4.961395 5.917808-4.99726C5.917808-5.009215 5.929763-5.021171 6.133001-5.176588L7.292653-6.085181C8.894645-7.328518 9.420672-7.746949 10.245579-7.81868C10.329265-7.830635 10.448817-7.830635 10.448817-8.033873C10.448817-8.105604 10.412951-8.16538 10.31731-8.16538C10.185803-8.16538 10.042341-8.141469 9.910834-8.141469H9.456538C9.085928-8.141469 8.691407-8.16538 8.332752-8.16538C8.249066-8.16538 8.105604-8.16538 8.105604-7.950187C8.105604-7.830635 8.18929-7.81868 8.261021-7.81868C8.392528-7.806725 8.547945-7.758904 8.547945-7.591532C8.547945-7.352428 8.18929-7.065504 8.093649-6.993773L3.407223-3.347447L4.399502-7.292653C4.507098-7.699128 4.531009-7.81868 5.379826-7.81868C5.606974-7.81868 5.71457-7.81868 5.71457-8.045828C5.71457-8.16538 5.595019-8.16538 5.535243-8.16538C5.32005-8.16538 5.068991-8.141469 4.841843-8.141469H3.431133C3.21594-8.141469 2.952927-8.16538 2.737733-8.16538C2.642092-8.16538 2.510585-8.16538 2.510585-7.938232C2.510585-7.81868 2.618182-7.81868 2.797509-7.81868C3.526775-7.81868 3.526775-7.723039 3.526775-7.591532C3.526775-7.567621 3.526775-7.49589 3.478954-7.316563L1.865006-.884682C1.75741-.466252 1.733499-.3467 .896638-.3467C.669489-.3467 .549938-.3467 .549938-.131507C.549938 0 .657534 0 .729265 0C.956413 0 1.195517-.02391 1.422665-.02391H2.82142C3.048568-.02391 3.299626 0 3.526775 0C3.622416 0 3.753923 0 3.753923-.227148C3.753923-.3467 3.646326-.3467 3.466999-.3467C2.737733-.3467 2.737733-.442341 2.737733-.561893C2.737733-.645579 2.809465-.944458 2.857285-1.135741L3.323537-2.988792L5.140722-4.411457C5.487422-3.646326 6.121046-2.116065 6.611208-.944458C6.647073-.872727 6.670984-.800996 6.670984-.71731C6.670984-.358655 6.192777-.3467 6.085181-.3467S5.858032-.3467 5.858032-.119552C5.858032 0 5.989539 0 6.025405 0C6.443836 0 6.886177-.02391 7.304608-.02391H7.878456C8.057783-.02391 8.261021 0 8.440349 0C8.51208 0 8.643587 0 8.643587-.227148C8.643587-.3467 8.53599-.3467 8.416438-.3467C7.974097-.358655 7.81868-.454296 7.639352-.884682L5.977584-4.829888Z'/>
<path id='eq1-g3-84' d='M4.985305-7.292653C5.057036-7.579577 5.080946-7.687173 5.260274-7.734994C5.355915-7.758904 5.750436-7.758904 6.001494-7.758904C7.197011-7.758904 7.758904-7.711083 7.758904-6.77858C7.758904-6.599253 7.711083-6.144956 7.639352-5.702615L7.627397-5.559153C7.627397-5.511333 7.675218-5.439601 7.746949-5.439601C7.866501-5.439601 7.866501-5.499377 7.902366-5.69066L8.249066-7.806725C8.272976-7.914321 8.272976-7.938232 8.272976-7.974097C8.272976-8.105604 8.201245-8.105604 7.962142-8.105604H1.422665C1.147696-8.105604 1.135741-8.093649 1.06401-7.878456L.334745-5.726526C.32279-5.702615 .286924-5.571108 .286924-5.559153C.286924-5.499377 .334745-5.439601 .406476-5.439601C.502117-5.439601 .526027-5.487422 .573848-5.642839C1.075965-7.089415 1.327024-7.758904 2.917061-7.758904H3.718057C4.004981-7.758904 4.124533-7.758904 4.124533-7.627397C4.124533-7.591532 4.124533-7.567621 4.064757-7.352428L2.462765-.932503C2.343213-.466252 2.319303-.3467 1.052055-.3467C.753176-.3467 .669489-.3467 .669489-.119552C.669489 0 .800996 0 .860772 0C1.159651 0 1.470486-.02391 1.769365-.02391H3.634371C3.93325-.02391 4.25604 0 4.554919 0C4.686426 0 4.805978 0 4.805978-.227148C4.805978-.3467 4.722291-.3467 4.411457-.3467C3.335492-.3467 3.335492-.454296 3.335492-.633624C3.335492-.645579 3.335492-.729265 3.383313-.920548L4.985305-7.292653Z'/>
<path id='eq1-g3-100' d='M6.01345-7.998007C6.025405-8.045828 6.049315-8.117559 6.049315-8.177335C6.049315-8.296887 5.929763-8.296887 5.905853-8.296887C5.893898-8.296887 5.308095-8.249066 5.248319-8.237111C5.045081-8.225156 4.865753-8.201245 4.65056-8.18929C4.351681-8.16538 4.267995-8.153425 4.267995-7.938232C4.267995-7.81868 4.363636-7.81868 4.531009-7.81868C5.116812-7.81868 5.128767-7.711083 5.128767-7.591532C5.128767-7.519801 5.104857-7.424159 5.092902-7.388294L4.363636-4.483188C4.23213-4.794022 3.90934-5.272229 3.287671-5.272229C1.936737-5.272229 .478207-3.526775 .478207-1.75741C.478207-.573848 1.171606 .119552 1.984558 .119552C2.642092 .119552 3.203985-.394521 3.53873-.789041C3.658281-.083686 4.220174 .119552 4.578829 .119552S5.224408-.095641 5.439601-.526027C5.630884-.932503 5.798257-1.661768 5.798257-1.709589C5.798257-1.769365 5.750436-1.817186 5.678705-1.817186C5.571108-1.817186 5.559153-1.75741 5.511333-1.578082C5.332005-.872727 5.104857-.119552 4.614695-.119552C4.267995-.119552 4.244085-.430386 4.244085-.669489C4.244085-.71731 4.244085-.968369 4.327771-1.303113L6.01345-7.998007ZM3.598506-1.422665C3.53873-1.219427 3.53873-1.195517 3.371357-.968369C3.108344-.633624 2.582316-.119552 2.020423-.119552C1.530262-.119552 1.255293-.561893 1.255293-1.267248C1.255293-1.924782 1.625903-3.263761 1.853051-3.765878C2.259527-4.60274 2.82142-5.033126 3.287671-5.033126C4.076712-5.033126 4.23213-4.052802 4.23213-3.957161C4.23213-3.945205 4.196264-3.789788 4.184309-3.765878L3.598506-1.422665Z'/>
<path id='eq1-g3-101' d='M2.139975-2.773599C2.462765-2.773599 3.275716-2.797509 3.849564-3.012702C4.758157-3.359402 4.841843-4.052802 4.841843-4.267995C4.841843-4.794022 4.387547-5.272229 3.598506-5.272229C2.343213-5.272229 .537983-4.136488 .537983-2.008468C.537983-.753176 1.255293 .119552 2.343213 .119552C3.969116 .119552 4.99726-1.147696 4.99726-1.303113C4.99726-1.374844 4.925529-1.43462 4.877709-1.43462C4.841843-1.43462 4.829888-1.422665 4.722291-1.315068C3.957161-.298879 2.82142-.119552 2.367123-.119552C1.685679-.119552 1.327024-.657534 1.327024-1.542217C1.327024-1.709589 1.327024-2.008468 1.506351-2.773599H2.139975ZM1.566127-3.012702C2.080199-4.853798 3.21594-5.033126 3.598506-5.033126C4.124533-5.033126 4.483188-4.722291 4.483188-4.267995C4.483188-3.012702 2.570361-3.012702 2.068244-3.012702H1.566127Z'/>
</defs>
<g id='eq1-page1'>
<use x='0' y='0' xlink:href='#eq1-g3-75'/>
<use x='9.959113' y='1.793263' xlink:href='#eq1-g2-112'/>
<use x='17.376686' y='0' xlink:href='#eq1-g1-3'/>
<use x='26.010957' y='0' xlink:href='#eq1-g3-101'/>
<use x='31.436397' y='0' xlink:href='#eq1-g5-40'/>
<use x='35.988722' y='0' xlink:href='#eq1-g3-84'/>
<use x='44.475558' y='0' xlink:href='#eq1-g5-41'/>
<use x='51.684548' y='0' xlink:href='#eq1-g5-43'/>
<use x='63.445863' y='0' xlink:href='#eq1-g3-75'/>
<use x='73.404976' y='1.793263' xlink:href='#eq1-g2-105'/>
<use x='79.442911' y='0' xlink:href='#eq1-g1-3'/>
<use x='88.077181' y='-9.630618' xlink:href='#eq1-g0-82'/>
<use x='96.047309' y='-6.475777' xlink:href='#eq1-g2-84'/>
<use x='93.722682' y='4.151166' xlink:href='#eq1-g4-48'/>
<use x='104.644297' y='0' xlink:href='#eq1-g3-101'/>
<use x='110.069737' y='0' xlink:href='#eq1-g5-40'/>
<use x='114.622062' y='0' xlink:href='#eq1-g3-84'/>
<use x='123.108898' y='0' xlink:href='#eq1-g5-41'/>
<use x='127.661224' y='0' xlink:href='#eq1-g3-100'/>
<use x='133.743917' y='0' xlink:href='#eq1-g3-84'/>
<use x='144.887416' y='0' xlink:href='#eq1-g5-43'/>
<use x='156.648731' y='0' xlink:href='#eq1-g3-75'/>
<use x='166.607845' y='1.793263' xlink:href='#eq1-g2-100'/>
<use x='174.119957' y='0' xlink:href='#eq1-g1-3'/>
<use x='183.949742' y='-4.707126' xlink:href='#eq1-g2-100'/>
<use x='188.307059' y='-4.707126' xlink:href='#eq1-g2-69'/>
<rect x='183.949742' y='-3.227886' height='.478187' width='11.010225'/>
<use x='184.223024' y='4.122632' xlink:href='#eq1-g2-100'/>
<use x='188.580341' y='4.122632' xlink:href='#eq1-g2-84'/>
</g>
</svg></td>
                </tr>
              </tfoot>
            </table>
<p>this function returns a generator coroutine that produces values according to a PID function with the gains specified when this controller was created. the generator finishes when the settled function evaluates to <code>true</code>.</p><p>example:</p><pre class="m-code"><span class="c1">// run until within our defined threshold of initial setpoint</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="kt">int32_t</span><span class="o">&amp;</span><span class="w"> </span><span class="nl">output</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">motor_controller</span><span class="p">.</span><span class="n">run</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">motor</span><span class="p">.</span><span class="n">move</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">clamp</span><span class="p">(</span><span class="n">output</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="kt">int32_t</span><span class="p">{</span><span class="mi">-127</span><span class="p">},</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="kt">int32_t</span><span class="p">{</span><span class="mi">127</span><span class="p">}));</span><span class="w"></span>
<span class="w">    </span><span class="n">pros</span><span class="o">::</span><span class="n">delay</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span></pre>
          </div></section>
          <section class="m-doc-details" id="a1bfb78041b414d27e6054632da67673c"><div>
            <h3>
              <div class="m-doc-template">
                template&lt;<a href="namespacehotel_1_1concepts.html#ab16fb67151d890b68025486310bb572f" class="m-doc">concepts::<wbr />Ratio</a> Kp_t, <a href="namespacehotel_1_1concepts.html#ab16fb67151d890b68025486310bb572f" class="m-doc">concepts::<wbr />Ratio</a> Ki_t, <a href="namespacehotel_1_1concepts.html#ab16fb67151d890b68025486310bb572f" class="m-doc">concepts::<wbr />Ratio</a> Kd_t, class _output_t, class FeedbackFn, class _target_t, class SettledFn&gt;
              </div>
              <span class="m-doc-wrap-bumper"><a href="classhotel_1_1pid__controller.html" class="m-doc">pid_<wbr />controller</a>&amp; hotel::<wbr />pid_controller&lt;Kp_t, Ki_t, Kd_t, _output_t, FeedbackFn, _target_t, SettledFn&gt;::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a1bfb78041b414d27e6054632da67673c" class="m-doc-self">target</a>(</span><span class="m-doc-wrap"><a href="classhotel_1_1pid__controller.html#a401b66789086924f940bd579663e3310" class="m-doc">target_<wbr />t</a> setpoint)</span></span>
            </h3>
            <p>set a new target for this controller</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">setpoint</td>
                  <td>the new setpoint</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td>this instance</td>
                </tr>
              </tfoot>
            </table>
<p>example:</p><pre class="m-code"><span class="c1">// grant new setpoint and run</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="kt">int32_t</span><span class="o">&amp;</span><span class="w"> </span><span class="nl">output</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">motor_controller</span><span class="p">.</span><span class="n">target</span><span class="p">(</span><span class="mf">300.0</span><span class="p">).</span><span class="n">run</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">motor</span><span class="p">.</span><span class="n">move</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">clamp</span><span class="p">(</span><span class="n">output</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="kt">int32_t</span><span class="p">{</span><span class="mi">-127</span><span class="p">},</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="kt">int32_t</span><span class="p">{</span><span class="mi">127</span><span class="p">}));</span><span class="w"></span>
<span class="w">    </span><span class="n">pros</span><span class="o">::</span><span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span></pre>
          </div></section>
        </section>
      </div>
    </div>
  </div>
</article></main>
<div class="m-doc-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-doc-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-doc-search-content">
          <form>
            <input type="search" name="q" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" autocomplete="off" spellcheck="false" />
          </form>
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            <p class="m-noindent">Search for symbols, directories, files, pages or
            modules. You can omit any prefix from the symbol or file path; adding a
            <code>:</code> or <code>/</code> suffix lists all members of given symbol or
            directory.</p>
            <p class="m-noindent">Use <span class="m-label m-dim">&darr;</span>
            / <span class="m-label m-dim">&uarr;</span> to navigate through the list,
            <span class="m-label m-dim">Enter</span> to go.
            <span class="m-label m-dim">Tab</span> autocompletes common prefix, you can
            copy a link to the result using <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">L</span> while <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">M</span> produces a Markdown link.</p>
          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search-v1.js"></script>
<script src="searchdata-v1.js" async="async"></script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>libhotel : hotel's canonical library for PROS. Created with <a href="https://doxygen.org/">Doxygen</a> 1.8.17 and <a href="https://mcss.mosra.cz/">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>
